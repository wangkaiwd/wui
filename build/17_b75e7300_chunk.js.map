{"version":3,"file":"17_b75e7300_chunk.js","sources":["webpack://WUI/./lib/components/form/validator.tsx"],"sourcesContent":["import { FormValue } from './form';\n\ninterface FormRule {\n  key: string,\n  required?: boolean,\n  minLength?: number,\n  maxLength?: number,\n  message: string\n}\ntype FormRules = Array<FormRule>\nexport interface FormError {\n  [K: string]: string[]\n}\n\nconst isEmpty = (value: string) => {\n  if (value === undefined || value === null || value === '') {\n    return true;\n  }\n  return false;\n};\nconst addError = (error: undefined | string[], message: string) => {\n  if (!error) {\n    error = [];\n  }\n  error.push(message);\n};\nconst validator = (formValue: FormValue, rules: FormRules): FormError => {\n  const errors: FormError = {};\n  rules.map(rule => {\n    const value = formValue[rule.key];\n    if (rule.required) {\n      if (isEmpty(value)) {\n        addError(errors[rule.key], '必填');\n      }\n    }\n    if (rule.minLength) {\n      if (formValue[rule.key].length < rule.minLength) {\n        addError(errors[rule.key], '太短');\n      }\n    }\n    if (rule.maxLength) {\n      if (formValue[rule.key].length > rule.maxLength) {\n        addError(errors[rule.key], '太长');\n      }\n    }\n  });\n  return errors;\n};\n\nexport default validator;\n"],"mappings":"AAcA","sourceRoot":""}